---
import { SEO } from "astro-seo";

interface Props {
    title: string;
    description: string;
    overrideTitle?: boolean;
    pubDate?: string;
    ogImage?: string;
}

const canonicalURL = new URL(Astro.url.pathname, Astro.site);

const {
    title,
    description,
    overrideTitle = false,
    pubDate = undefined,
    ogImage = "/og/og.png",
} = Astro.props;

function getOGImageURL() {
    return `/og/${new URL(Astro.url).pathname.split("/").filter(Boolean).pop()!}.png`;
}
---

<SEO
    title={overrideTitle ? title : `${title} - Toby Nguyen`}
    {description}
    canonical={canonicalURL}
    charset="UTF-8"
    extend={{
        meta: [
            { name: "generator", content: Astro.generator },
            { name: "author", content: "Toby Nguyen" },
            { name: "viewport", content: "width=device-width, initial-scale=1.0" },
            { name: "color-scheme", content: "dark light" },
            { name: "theme-color", content: "#ffffff", media: "(prefers-color-scheme: light)" },
            { name: "theme-color", content: "#000000", media: "(prefers-color-scheme: dark)" },
        ],
        link: [
            { rel: "sitemap", href: "/sitemap-index.xml" },
            { rel: "icon", type: "image/png", href: "/favicon-96x96.png", sizes: "96x96" },
            { rel: "icon", type: "image/svg+xml", href: "/favicon.svg" },
            { rel: "shortcut icon", href: "/favicon.ico" },
            { rel: "apple-touch-icon", sizes: "180x180", href: "/apple-touch-icon.png" },
        ],
    }}
    openGraph={{
        basic: {
            type: pubDate ? "article" : "website",
            url: canonicalURL,
            title: overrideTitle ? title : `${title} - Toby Nguyen`,
            image: pubDate ? getOGImageURL() : ogImage,
        },
        optional: { description, siteName: "Toby Nguyen" },
        article: { publishedTime: pubDate, authors: pubDate ? ["Toby Nguyen"] : undefined },
    }}
    twitter={{ title: overrideTitle ? title : `${title} - Toby Nguyen`, site: "tobynguyen27", creator: "tobynguyen27" }} />
