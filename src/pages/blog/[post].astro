---
import type { CollectionEntry } from "astro:content";
import { getCollection, render } from "astro:content";
import dayjs from "dayjs";
import Root from "@/layouts/Root.astro";

export async function getStaticPaths() {
    const posts = await getCollection("blog");

    return posts.map((post) => ({ params: { post: post.id }, props: post }));
}
type Props = CollectionEntry<"blog">;

const post = Astro.props;

const { Content } = await render(post);
const { title, description, pubDate, minutesRead } = post.data;
---

<Root title={title} description={description} overrideTitle={true}>
    <div class="w-10/12 sm:w-3/4 lg:w-1/2 mx-auto mt-12 border-gray-400 rounded-md prose p-5 sm:p-8 md:p-12">
        <div class="w-full h-full">
            <h1 class="">{title}</h1>
            <div class="w-full h-full flex flex-col md:(flex-row justify-between gap-3)">
                <div class="flex flex-row items-center gap-1 text-secondary h-fit">
                    <span>{dayjs(pubDate, "YYYY-MM-DD").format("MMMM D, YYYY")} Â· {minutesRead} min read</span>
                </div>
                <div class="">
                    <span class="text-secondary"></span>
                </div>
            </div>
        </div>
        <div class="w-full h-full prose mx-auto">
            <Content />
        </div>
    </div>
</Root>
